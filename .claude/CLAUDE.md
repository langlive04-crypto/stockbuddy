# StockBuddy å°ˆæ¡ˆæŒ‡å¼•

> Claude Code æ¯æ¬¡å•Ÿå‹•æ™‚è«‹å…ˆé–±è®€æ­¤æ–‡ä»¶å’Œ `é–‹ç™¼æ—¥èªŒ.md`
> **é‡è¦**: ä¿®å¾©é€²åº¦è¿½è¹¤è«‹æŸ¥é–± `StockBuddy-V10.37-ä¿®å¾©ç‹€æ…‹è¿½è¹¤.md`

---

## å°ˆæ¡ˆæ¦‚è¿°

**StockBuddy** - AI é©…å‹•çš„å°è‚¡/ç¾è‚¡æ™ºèƒ½é¸è‚¡ç³»çµ±

| é …ç›® | èªªæ˜ |
|------|------|
| ç•¶å‰ç‰ˆæœ¬ | V10.41 |
| å‰ç«¯ | React 18 + Vite + Tailwind (Port 3000) |
| å¾Œç«¯ | FastAPI + Python (Port 8000) |
| ç¨‹å¼ç¢¼ä½ç½® | `data/è‚¡ç¥¨ç¨‹å¼é–‹ç™¼/` |

---

## éƒ¨ç½²æ¶æ§‹ (é‡è¦)

> **2026-01-16 æ›´æ–°**: å›  Render å…è²»æ–¹æ¡ˆè¨˜æ†¶é«”é™åˆ¶ (512MB)ï¼Œæ¡ç”¨é›™è»Œéƒ¨ç½²ç­–ç•¥

### é›²ç«¯ vs æœ¬åœ°å·®ç•°

| é …ç›® | é›²ç«¯ (Render) | æœ¬åœ°é–‹ç™¼ |
|------|--------------|----------|
| **ä¾è³´æª”æ¡ˆ** | `requirements.txt` | `requirements-local.txt` |
| **è¨˜æ†¶é«”** | 512MB é™åˆ¶ | ç„¡é™åˆ¶ |
| **Python** | 3.12.8 | 3.14.1 (æˆ– 3.12) |
| **AI å¥—ä»¶** | âŒ ä¸å®‰è£ | âœ… å®Œæ•´å®‰è£ |

### åŠŸèƒ½å·®ç•°å°ç…§

| åŠŸèƒ½ | é›²ç«¯ | æœ¬åœ° | èªªæ˜ |
|------|:----:|:----:|------|
| XGBoost ML é æ¸¬ | âœ… | âœ… | å®Œæ•´åŠŸèƒ½ |
| SHAP è§£é‡‹ | ğŸ“Š | âœ… | é›²ç«¯ç”¨ç‰¹å¾µé‡è¦æ€§å‚™æ¡ˆ |
| FinBERT æƒ…ç·’ | ğŸ“Š | âœ… | é›²ç«¯ç”¨é—œéµå­—åˆ†æå‚™æ¡ˆ |
| TFT é æ¸¬ | ğŸ“Š | âš ï¸ | é›²ç«¯ç”¨ç·šæ€§è¶¨å‹¢å‚™æ¡ˆï¼Œæœ¬åœ°éœ€ Python 3.12 |
| RL äº¤æ˜“å»ºè­° | ğŸ“Š | âœ… | é›²ç«¯ç”¨ RSI/MACD è¦å‰‡å‚™æ¡ˆ |

### ä¸å®‰è£æ–¼é›²ç«¯çš„å¥—ä»¶ (è¨˜æ†¶é«”è€ƒé‡)

```
torch>=2.1.0              # ~800MB
transformers>=4.36.0      # ~400MB
shap>=0.44.0              # ~200MB
stable-baselines3>=2.2.0  # ~100MB
pytorch-forecasting>=1.0.0 # ~200MB
```

### æœ¬åœ°å®‰è£å®Œæ•´ AI åŠŸèƒ½

```bash
cd stockbuddy-backend
pip install -r requirements-local.txt
```

---

## ç³»çµ±ç‹€æ…‹

> **æœ€å¾Œæª¢æ¸¬**: 2026-01-16
> **ç‹€æ…‹**: V10.41 AI å‡ç´šåŒ…å®Œæˆ + ML æ¨¡å‹å·²è¨“ç·´ + é›²ç«¯è¼•é‡åŒ–éƒ¨ç½² âœ…

### V10.41 æ¨¡å‹è¨“ç·´ (2026-01-15 å®Œæˆ)

| é …ç›® | çµæœ |
|------|------|
| XGBoost ML æ¨¡å‹ | âœ… è¨“ç·´æˆåŠŸ |
| æ¨¡å‹ç‰ˆæœ¬ | v20260115_191023_ful |
| è¨“ç·´æ¨£æœ¬æ•¸ | 3,560 |
| ç‰¹å¾µæ•¸é‡ | 55 |
| æ¸¬è©¦æº–ç¢ºç‡ | **72.89%** (ç›®æ¨™ >65%) |
| æ¸¬è©¦ F1 | **75.84%** (ç›®æ¨™ >0.60) |
| Python ç‰ˆæœ¬ | 3.12.8 (é›²ç«¯åŒæ­¥) |

### V10.41 AI å‡ç´šåŒ… (2026-01-15 å®Œæˆ)

| éšæ®µ | åŠŸèƒ½ | æ¸¬è©¦çµæœ | ç‹€æ…‹ |
|------|------|----------|------|
| Phase 1 | SHAP + FinBERT | 8/8 é€šé | âœ… |
| Phase 2 | TFT æ™‚é–“åºåˆ—é æ¸¬ | 7/7 é€šé | âœ… |
| Phase 3 | PPO å¼·åŒ–å­¸ç¿’ | 10/10 é€šé | âœ… |

**æ–°å¢å¾Œç«¯æ¨¡çµ„**:
| æ¨¡çµ„ | ç”¨é€” |
|------|------|
| `shap_explainer.py` | SHAP è§£é‡‹æ€§ AIï¼ŒML é æ¸¬å¯è§£é‡‹æ€§ |
| `finbert_sentiment.py` | FinBERT é‡‘èæƒ…ç·’åˆ†æ (ä¸­/è‹±æ–‡) |
| `tft_predictor.py` | TFT æ™‚é–“åºåˆ—é æ¸¬ (5æ—¥é æ¸¬+å€é–“) |
| `rl_agent.py` | PPO å¼·åŒ–å­¸ç¿’äº¤æ˜“ä»£ç† |

**æ–°å¢å‰ç«¯å…ƒä»¶**:
| å…ƒä»¶ | ç”¨é€” |
|------|------|
| `SHAPWaterfall.jsx` | SHAP ç€‘å¸ƒåœ–è¦–è¦ºåŒ– |
| `PredictionExplainer.jsx` | AI é æ¸¬è§£é‡‹é¢æ¿ |

**æ–°å¢ API ç«¯é»**:
| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|------|------|------|
| `/api/stocks/ml/explain/{stock_id}` | GET | SHAP è§£é‡‹ |
| `/api/stocks/ml/sentiment/{stock_id}` | GET | è‚¡ç¥¨æƒ…ç·’åˆ†æ |
| `/api/stocks/ml/sentiment/analyze` | POST | æ–‡å­—æƒ…ç·’åˆ†æ |
| `/api/stocks/ml/forecast/{stock_id}` | GET | TFT é æ¸¬ |
| `/api/stocks/ml/rl/suggest` | POST | RL äº¤æ˜“å»ºè­° |

**é—œéµæŠ€è¡“**:
- SHAP TreeExplainer è§£é‡‹ XGBoost æ¨¡å‹
- FinBERT (ProsusAI/finbert) è‹±æ–‡ + Chinese FinBERT ä¸­æ–‡æƒ…ç·’åˆ†æ
- Temporal Fusion Transformer æ™‚é–“åºåˆ—é æ¸¬
- PPO å¼·åŒ–å­¸ç¿’ + Sharpe Ratio çå‹µå‡½æ•¸
- æ‰€æœ‰æ¨¡çµ„çš†æœ‰è¦å‰‡å¼•æ“å‚™æ¡ˆï¼Œç„¡ä¾è³´æ™‚ä»å¯é‹ä½œ

**é©—æ”¶å ±å‘Š**: `docs/V10.41-AIå‡ç´šåŒ…-é©—æ”¶å ±å‘Š.md`

### V10.41 å¢é‡å­¸ç¿’ç³»çµ± (2026-01-14 å®Œæˆ)

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------------|
| è³‡æ–™åº«æ“´å±• | âœ… | æ–°å¢ TrainingSample, ModelVersion, TrainingHistory 3 å€‹è¡¨ |
| MLTrainingManager | âœ… | æ–°å¢è¨“ç·´ç®¡ç†å™¨æ ¸å¿ƒæ¨¡çµ„ (ç‰ˆæœ¬ç®¡ç†ã€æ•¸æ“šç´¯ç©) |
| å¢é‡è¨“ç·´ | âœ… | incremental_train() ä½¿ç”¨ç¶“é©—å›æ”¾é˜²æ­¢éºå¿˜ |
| æ··åˆè¨“ç·´ | âœ… | hybrid_train() çµåˆæ­·å²+ç¸¾æ•ˆæ•¸æ“š |
| ç‰ˆæœ¬ç®¡ç† | âœ… | è¨“ç·´ä¸å†è¦†è“‹ï¼Œä¿ç•™æ‰€æœ‰æ­·å²ç‰ˆæœ¬ï¼Œæ”¯æŒå›æ»¾ |
| è¨“ç·´æ¨£æœ¬æŒä¹…åŒ– | âœ… | æ‰€æœ‰è¨“ç·´æ•¸æ“šä¿å­˜åˆ°è³‡æ–™åº« |
| API æ“´å±• | âœ… | /train-incremental, /versions, /training-data/stats ç­‰ |
| MLPanel.jsx | âœ… | å‰ç«¯æ–°å¢ç‰ˆæœ¬ç®¡ç† UIã€å¢é‡è¨“ç·´é¸é … |

**é—œéµæŠ€è¡“**:
- XGBoost `xgb_model` åƒæ•¸å¯¦ç¾å¢é‡è¨“ç·´
- ç¶“é©—å›æ”¾ (Experience Replay) é˜²æ­¢ç½é›£æ€§éºå¿˜
- æ¨£æœ¬åŠ æ¬Š: æ–°æ•¸æ“š 1.5x, èˆŠæ•¸æ“š 1.0x

### V10.40 ML è¨“ç·´å™¨å®Œå–„ (2026-01-14 å®Œæˆ)

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------------|
| 55 ç‰¹å¾µæ•´åˆ | âœ… | ModelTrainer æ•´åˆ ml_feature_engine å®Œæ•´ 55 ç‰¹å¾µ |
| use_full_features åƒæ•¸ | âœ… | æ”¯æ´åˆ‡æ›å®Œæ•´/åŸºç¤ç‰¹å¾µæ¨¡å¼ |
| æ”¹é€²æ¨¡å‹åƒæ•¸ | âœ… | n_estimators=200, max_depth=5, subsample=0.8 |
| æ¸¬è©¦é›†è©•ä¼° | âœ… | æ–°å¢ test_accuracy, test_f1 æŒ‡æ¨™ |
| å“è³ªéæ¿¾ | âœ… | è‡ªå‹•è·³éç¼ºå¤± >50% çš„ä½å“è³ªæ•¸æ“š |
| API æ›´æ–° | âœ… | /api/stocks/ml/train æ”¯æ´ use_full_features åƒæ•¸ |
| MLPanel.jsx | âœ… | æ–°å¢å‰ç«¯ ML ç®¡ç†é¢æ¿ï¼ˆè¨“ç·´/é æ¸¬/ç‹€æ…‹ï¼‰ |
| é¸å–®æ•´åˆ | âœ… | ğŸ“‹ç­–ç•¥ â†’ ğŸ¤–MLæ¨¡å‹ |

### V10.39 é¸å–®å„ªåŒ– (2026-01-14 å®Œæˆ)

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------------|
| é¸å–®æ•´åˆ | âœ… | 29 é¸å–® â†’ 8 ä¸»é¸å–® + å­é¸å–® (-72%) |
| DropdownMenu | âœ… | æ–°å¢ä¸‹æ‹‰é¸å–®å…ƒä»¶ (ESCé—œé–‰ã€éµç›¤å°èˆªã€ARIAæ”¯æ´) |
| UnifiedAlerts | âœ… | æ•´åˆ alerts + smart-alertsï¼ŒTab åˆ‡æ› |
| UnifiedPerformance | âœ… | æ•´åˆ tracker + history-perfï¼ŒTab åˆ‡æ› |
| MobileNav æ›´æ–° | âœ… | æ‰‹æ©Ÿç«¯ 5 å…¥å£ + æ›´å¤šé¢æ¿ |
| menuGroups.js | âœ… | æ–°å¢ `src/config/menuGroups.js` é…ç½®æª” |
| CSS å‹•ç•« | âœ… | ä¸‹æ‹‰å±•é–‹/æ”¶åˆã€åº•éƒ¨æ»‘å…¥å‹•ç•« |

### V10.38 æ ¸å¿ƒåŠŸèƒ½ (å·²é©—è­‰)

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------------|
| å‹•æ…‹ç”¢æ¥­ç†±åº¦ | âœ… | `industry_heat_service.py` å–ä»£ç¡¬ç·¨ç¢¼ HOT_INDUSTRIES |
| ML ç‰¹å¾µæ“´å…… | âœ… | 55 å€‹ç‰¹å¾µï¼ˆ8 å¤§é¡ï¼šprice, momentum, volume, volatility, chip, fundamental, market, scoreï¼‰ |
| èè³‡èåˆ¸çœŸå¯¦ API | âœ… | MarginService æ•´åˆ TWSE/FinMind API |
| è¿½é«˜é‚è¼¯å›æ¸¬ | âœ… | `backtest_chase_logic.py` é©—è­‰è…³æœ¬ |
| React Router æ•´åˆ | âœ… | URL åƒæ•¸åŒæ­¥ã€æ”¯æ´æ·±å±¤é€£çµ |
| SQLite è³‡æ–™åº« | âœ… | ç”¨æˆ¶ã€æŠ•çµ„ã€è‡ªé¸è‚¡ã€æ¨è–¦æ­·å²è¡¨ |
| JWT èº«ä»½é©—è­‰ | âœ… | è¨»å†Šã€ç™»å…¥ã€Token é©—è­‰ |
| localStorage çµ±ä¸€ | âœ… | storageManager.js é‡æ§‹ |

### å®Œæˆç‹€æ…‹ç¸½è¦½

| å„ªå…ˆç´š | é …ç›®æ•¸ | ç‹€æ…‹ |
|--------|--------|------|
| P0 | 5 é … | **100%** âœ… |
| P1 | 7 é … | **100%** âœ… |
| X1 | 1 é … | **100%** âœ… |
| P2 | 6 é … | **100%** âœ… |
| P3 | 5 é … | **100%** âœ… |

---

## é—œéµæª”æ¡ˆä½ç½®

### å¾Œç«¯
```
data/è‚¡ç¥¨ç¨‹å¼é–‹ç™¼/stockbuddy-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                    # API å…¥å£ (161 è·¯ç”±)
â”‚   â”œâ”€â”€ database.py                # è³‡æ–™åº«æ¨¡å‹ (V10.38)
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ stocks.py              # ä¸»è¦è‚¡ç¥¨ API (~3168 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ auth_routes.py         # èº«ä»½é©—è­‰ API (V10.38)
â”‚   â”‚   â”œâ”€â”€ risk_routes.py         # é¢¨éšªç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ ml_routes.py           # ML é æ¸¬ API
â”‚   â”‚   â”œâ”€â”€ performance_routes.py  # ç¸¾æ•ˆè¿½è¹¤ API
â”‚   â”‚   â””â”€â”€ us_stock_routes.py     # ç¾è‚¡ API
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ auth_service.py        # JWT èªè­‰ (V10.38)
â”‚       â”œâ”€â”€ industry_heat_service.py # å‹•æ…‹ç”¢æ¥­ç†±åº¦ (V10.38)
â”‚       â”œâ”€â”€ ml_feature_engine.py   # ML ç‰¹å¾µå·¥ç¨‹ (V10.38, 55 ç‰¹å¾µ)
â”‚       â”œâ”€â”€ ml_predictor.py        # ML é æ¸¬ (V10.41 å¢é‡è¨“ç·´)
â”‚       â”œâ”€â”€ ml_training_manager.py # ML è¨“ç·´ç®¡ç†å™¨ (V10.41 æ–°å¢)
â”‚       â”œâ”€â”€ historical_data_enricher.py # æ­·å²æ•¸æ“šè£œé½Š (V10.40 æ–°å¢)
â”‚       â”œâ”€â”€ institutional_service.py # MarginService (V10.38 çœŸå¯¦ API)
â”‚       â”œâ”€â”€ twse_openapi.py        # TWSE API
â”‚       â”œâ”€â”€ technical_analysis.py  # æŠ€è¡“åˆ†æ
â”‚       â”œâ”€â”€ scoring_service.py     # è©•åˆ†æœå‹™ (V10.38 async æ–¹æ³•)
â”‚       â”œâ”€â”€ ai_stock_picker.py     # AI é¸è‚¡
â”‚       â”œâ”€â”€ performance_tracker.py # ç¸¾æ•ˆè¿½è¹¤
â”‚       â””â”€â”€ risk_calculator.py     # é¢¨éšªè¨ˆç®—
```

### å‰ç«¯
```
data/è‚¡ç¥¨ç¨‹å¼é–‹ç™¼/stockbuddy-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.jsx                   # å…¥å£ (React Router)
â”‚   â”œâ”€â”€ App.jsx                    # ä¸»æ‡‰ç”¨ (V10.39 é¸å–®å„ªåŒ–)
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ menuGroups.js          # é¸å–®ç¾¤çµ„é…ç½® (V10.39 æ–°å¢)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ storageManager.js      # çµ±ä¸€å…¥å£ (V10.38)
â”‚   â”‚   â”œâ”€â”€ portfolioManager.js    # æŠ•çµ„ç®¡ç†
â”‚   â”‚   â””â”€â”€ historyManager.js      # æ­·å²å¿«ç…§
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ui/                    # UI çµ„ä»¶åº«
â”‚       â”œâ”€â”€ DropdownMenu.jsx       # ä¸‹æ‹‰é¸å–® (V10.39 æ–°å¢)
â”‚       â”œâ”€â”€ UnifiedAlerts.jsx      # æ•´åˆæé†’ (V10.39 æ–°å¢)
â”‚       â”œâ”€â”€ UnifiedPerformance.jsx # æ•´åˆç¸¾æ•ˆ (V10.39 æ–°å¢)
â”‚       â”œâ”€â”€ MobileNav.jsx          # æ‰‹æ©Ÿå°èˆª (V10.39 æ›´æ–°)
â”‚       â”œâ”€â”€ MarketDashboard.jsx    # å¸‚å ´ç¸½è¦½
â”‚       â”œâ”€â”€ USStockPanel.jsx       # ç¾è‚¡é¢æ¿
â”‚       â”œâ”€â”€ StockScreener.jsx      # é¸è‚¡å™¨
â”‚       â””â”€â”€ SimulationTrading.jsx  # æ¨¡æ“¬äº¤æ˜“
```

---

## V10.39 é¸å–®æ¶æ§‹

### 8 å€‹ä¸»é¸å–®

| ä¸»é¸å–® | åŒ…å«åŠŸèƒ½ |
|--------|---------|
| ğŸ“Š å¸‚å ´ | å¸‚å ´ç¸½è¦½ã€è¡Œäº‹æ›†ã€è²¡ç¶“æ–°è |
| ğŸ¯ AIé¸è‚¡ | AIç²¾é¸ã€ç†±é–€é£†è‚¡ã€æˆäº¤ç†±é–€ã€æ½›åŠ›é»‘é¦¬ã€é€²éšç¯©é¸ |
| ğŸ” åˆ†æ | å€‹è‚¡æŸ¥è©¢ã€å¤šè‚¡æ¯”è¼ƒã€AIå ±å‘Šã€å½¢æ…‹è¾¨è­˜ã€é€²éšåœ–è¡¨ |
| ğŸ“‹ ç­–ç•¥ | ç¶œåˆç­–ç•¥ã€ç­–ç•¥ç¯„æœ¬ã€å›æ¸¬æ¨¡æ“¬ã€æ¨¡æ“¬äº¤æ˜“ |
| ğŸ’¼ æŠ•çµ„ | æŠ•è³‡çµ„åˆã€äº¤æ˜“è¨˜éŒ„ã€è‚¡ç¥¨åˆ†é¡ã€æŠ•è³‡æ—¥è¨˜ã€é¢¨éšªç®¡ç†ã€é™¤æ¬Šæ¯ |
| ğŸ“ˆ ç¸¾æ•ˆ | æ¨è–¦è¿½è¹¤ + æ­·å²ç¸¾æ•ˆ (Tab åˆ‡æ›) |
| ğŸ”” æé†’ | åƒ¹æ ¼è­¦ç¤º + æ™ºèƒ½æé†’ (Tab åˆ‡æ›) |
| ğŸ‡ºğŸ‡¸ ç¾è‚¡ | ç¾è‚¡å¸‚å ´ |

---

## é–‹ç™¼æµç¨‹

1. **å•Ÿå‹•å¾Œç«¯**: `cd stockbuddy-backend && uvicorn app.main:app --reload --port 8000`
2. **å•Ÿå‹•å‰ç«¯**: `cd stockbuddy-frontend && npm run dev`
3. **API æ–‡ä»¶**: http://localhost:8000/docs

---

## æ¯æ¬¡å·¥ä½œæ™‚

1. å…ˆè®€å– `é–‹ç™¼æ—¥èªŒ.md` æŸ¥çœ‹å¾…è¾¦äº‹é …
2. å®Œæˆä¿®å¾©å¾Œæ›´æ–° `é–‹ç™¼æ—¥èªŒ.md` çš„å•é¡Œç‹€æ…‹
3. é‡å¤§è®Šæ›´è«‹æ›´æ–°ç‰ˆæœ¬è™Ÿ
4. æ›´æ–°ç›¸é—œæ–‡ä»¶ (CLAUDE.md, CHANGELOG ç­‰)

---

*æœ€å¾Œæ›´æ–°: 2026-01-16 (V10.41 é›²ç«¯è¼•é‡åŒ–éƒ¨ç½²)*
